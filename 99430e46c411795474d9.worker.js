!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/theraleap/",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};function i(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}Object.assign;function s(t){return"function"==typeof t}var o=!1,c={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;o=t},get useDeprecatedSynchronousErrorHandling(){return o}};function u(t){setTimeout(function(){throw t})}var a={closed:!0,next:function(t){},error:function(t){if(c.useDeprecatedSynchronousErrorHandling)throw t;u(t)},complete:function(){}},l=Array.isArray||function(t){return t&&"number"==typeof t.length};function h(t){return null!=t&&"object"==typeof t}var p,f={e:{}};function d(){try{return p.apply(this,arguments)}catch(t){return f.e=t,f}}function b(t){return p=t,d}var y=function(t){function e(r){var n=t.call(this,r?r.length+" errors occurred during unsubscription:\n  "+r.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"")||this;return n.errors=r,n.name="UnsubscriptionError",Object.setPrototypeOf(n,e.prototype),n}return i(e,t),e}(Error),v=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var r=this._parent,n=this._parents,i=this._unsubscribe,o=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var c=-1,u=n?n.length:0;r;)r.remove(this),r=++c<u&&n[c]||null;if(s(i))b(i).call(this)===f&&(e=!0,t=t||(f.e instanceof y?g(f.e.errors):[f.e]));if(l(o))for(c=-1,u=o.length;++c<u;){var a=o[c];if(h(a))if(b(a.unsubscribe).call(a)===f){e=!0,t=t||[];var p=f.e;p instanceof y?t=t.concat(g(p.errors)):t.push(p)}}if(e)throw new y(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var r=e;switch(typeof e){case"function":r=new t(e);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;(r=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.prototype._addParent=function(t){var e=this._parent,r=this._parents;e&&e!==t?r?-1===r.indexOf(t)&&r.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function g(t){return t.reduce(function(t,e){return t.concat(e instanceof y?e.errors:e)},[])}var w="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber",S=function(t){function e(e,r,n){var i,s=t.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=a;break;case 1:if(!e){s.destination=a;break}if("object"==typeof e){if((i=e)instanceof S||"syncErrorThrowable"in i&&i[w]){var o=e[w]();s.syncErrorThrowable=o.syncErrorThrowable,s.destination=o,o.add(s)}else s.syncErrorThrowable=!0,s.destination=new _(s,e);break}default:s.syncErrorThrowable=!0,s.destination=new _(s,e,r,n)}return s}return i(e,t),e.prototype[w]=function(){return this},e.create=function(t,r,n){var i=new e(t,r,n);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(v),_=function(t){function e(e,r,n,i){var o,c=t.call(this)||this;c._parentSubscriber=e;var u=c;return s(r)?o=r:r&&(o=r.next,n=r.error,i=r.complete,r!==a&&(s((u=Object.create(r)).unsubscribe)&&c.add(u.unsubscribe.bind(u)),u.unsubscribe=c.unsubscribe.bind(c))),c._context=u,c._next=o,c._error=n,c._complete=i,c}return i(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;c.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,r=c.useDeprecatedSynchronousErrorHandling;if(this._error)r&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):u(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;u(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};c.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),c.useDeprecatedSynchronousErrorHandling)throw t;u(t)}},e.prototype.__tryOrSetError=function(t,e,r){if(!c.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,r)}catch(e){return c.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(u(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(S);var m="function"==typeof Symbol&&Symbol.observable||"@@observable";function x(){}function E(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:x}var T=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,i=function(t,e,r){if(t){if(t instanceof S)return t;if(t[w])return t[w]()}return t||e||r?new S(t,e,r):new S(a)}(t,e,r);if(n?n.call(i,this.source):i.add(this.source||!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),c.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){c.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),t.error(e)}},t.prototype.forEach=function(t,e){var r=this;return new(e=O(e))(function(e,n){var i;i=r.subscribe(function(e){try{t(e)}catch(t){n(t),i&&i.unsubscribe()}},n,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[m]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:E(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=O(t))(function(t,r){var n;e.subscribe(function(t){return n=t},function(t){return r(t)},function(){return t(n)})})},t.create=function(e){return new t(e)},t}();function O(t){if(t||(t=c.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var j=function(t){function e(){var r=t.call(this,"object unsubscribed")||this;return r.name="ObjectUnsubscribedError",Object.setPrototypeOf(r,e.prototype),r}return i(e,t),e}(Error),D=function(t){function e(e,r){var n=t.call(this)||this;return n.subject=e,n.subscriber=r,n.closed=!1,n}return i(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}},e}(v),C=function(t){function e(e){var r=t.call(this,e)||this;return r.destination=e,r}return i(e,t),e}(S),P=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return i(e,t),e.prototype[w]=function(){return new C(this)},e.prototype.lift=function(t){var e=new I(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new j;if(!this.isStopped)for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new j;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new j;this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),n=0;n<e;n++)r[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new j;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new j;return this.hasError?(t.error(this.thrownError),v.EMPTY):this.isStopped?(t.complete(),v.EMPTY):(this.observers.push(t),new D(this,t))},e.prototype.asObservable=function(){var t=new T;return t.source=this,t},e.create=function(t,e){return new I(t,e)},e}(T),I=function(t){function e(e,r){var n=t.call(this)||this;return n.destination=e,n.source=r,n}return i(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):v.EMPTY},e}(P);const A={connectedToNativeDeviceDriver:!1,deviceHardwareConnected:void 0,nativeDeviceDriverOnline:void 0};var F=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.scheduler=e,n.work=r,n.pending=!1,n}return i(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},e.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),setInterval(t.flush.bind(t,this),r)},e.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var r=!1,n=void 0;try{this.work(t)}catch(t){r=!0,n=!!t&&t||new Error(t)}if(r)return this.unsubscribe(),n},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,r=e.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,r){return t.call(this)||this}return i(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(v)),H=function(){function t(e,r){void 0===r&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(r,e)},t.now=Date.now?Date.now:function(){return+new Date},t}(),V=new(function(t){function e(r,n){void 0===n&&(n=H.now);var i=t.call(this,r,function(){return e.delegate&&e.delegate!==i?e.delegate.now():n()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return i(e,t),e.prototype.schedule=function(r,n,i){return void 0===n&&(n=0),e.delegate&&e.delegate!==this?e.delegate.schedule(r,n,i):t.prototype.schedule.call(this,r,n,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}},e}(H))(F);var M=function(){function t(t,e,r,n){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=r,this.scheduler=n}return t.prototype.call=function(t,e){return e.subscribe(new N(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},t}(),k=function(){return function(){this.buffer=[]}}(),N=function(t){function e(e,r,n,i,s){var o=t.call(this,e)||this;o.bufferTimeSpan=r,o.bufferCreationInterval=n,o.maxBufferSize=i,o.scheduler=s,o.contexts=[];var c=o.openContext();if(o.timespanOnly=null==n||n<0,o.timespanOnly){var u={subscriber:o,context:c,bufferTimeSpan:r};o.add(c.closeAction=s.schedule(z,r,u))}else{var a={subscriber:o,context:c},l={bufferTimeSpan:r,bufferCreationInterval:n,subscriber:o,scheduler:s};o.add(c.closeAction=s.schedule(Y,r,a)),o.add(s.schedule(U,n,l))}return o}return i(e,t),e.prototype._next=function(t){for(var e,r=this.contexts,n=r.length,i=0;i<n;i++){var s=r[i],o=s.buffer;o.push(t),o.length==this.maxBufferSize&&(e=s)}e&&this.onBufferFull(e)},e.prototype._error=function(e){this.contexts.length=0,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts,r=this.destination;e.length>0;){var n=e.shift();r.next(n.buffer)}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();var r=this.bufferTimeSpan,n={subscriber:this,context:t,bufferTimeSpan:r};this.add(t.closeAction=this.scheduler.schedule(z,r,n))}},e.prototype.openContext=function(){var t=new k;return this.contexts.push(t),t},e.prototype.closeContext=function(t){this.destination.next(t.buffer);var e=this.contexts;(e?e.indexOf(t):-1)>=0&&e.splice(e.indexOf(t),1)},e}(S);function z(t){var e=t.subscriber,r=t.context;r&&e.closeContext(r),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function U(t){var e=t.bufferCreationInterval,r=t.bufferTimeSpan,n=t.subscriber,i=t.scheduler,s=n.openContext();n.closed||(n.add(s.closeAction=i.schedule(Y,r,{subscriber:n,context:s})),this.schedule(t,e))}function Y(t){var e=t.subscriber,r=t.context;e.closeContext(r)}function B(t,e){return function(r){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new q(t,e))}}var q=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new G(t,this.project,this.thisArg))},t}(),G=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.project=r,i.count=0,i.thisArg=n||i,i}return i(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(S);function R(t,e){return function(r){return r.lift(new J(t,e))}}var J=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new W(t,this.predicate,this.thisArg))},t}(),W=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.predicate=r,i.thisArg=n,i.count=0,i}return i(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(S);var $={leading:!0,trailing:!1};function K(t,e,r){return void 0===e&&(e=V),void 0===r&&(r=$),function(n){return n.lift(new L(t,e,r.leading,r.trailing))}}var L=function(){function t(t,e,r,n){this.duration=t,this.scheduler=e,this.leading=r,this.trailing=n}return t.prototype.call=function(t,e){return e.subscribe(new Q(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),Q=function(t){function e(e,r,n,i,s){var o=t.call(this,e)||this;return o.duration=r,o.scheduler=n,o.leading=i,o.trailing=s,o._hasTrailingValue=!1,o._trailingValue=null,o}return i(e,t),e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(X,this.duration,{subscriber:this})),this.leading&&this.destination.next(t))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},e}(S);function X(t){t.subscriber.clearThrottle()}const Z=t=>{const e=[];for(let r=0;r<t.length-1;r++)e.push(t[r+1]-t[r]);return e},tt=t=>{let e=t[0];for(let r=1;r<t.length;r++){if(e<0&&t[r]>=0)return r;if(e>=0&&t[r]<0)return r;e=t[r]}};const et={"ThumbSpreadClassifier-V0.1":class{constructor(t,e,r,n,i,s){this.windowSize=t,this.windowInterval=e,this.detectionThreshhold=r,this.symmetryTolerance=n,this.throttleTimeDuration=i,this.leapPointableIdentifier=s}call(t,e){return e.pipe(function(t){var e,r=arguments.length,n=V;(e=arguments[arguments.length-1])&&"function"==typeof e.schedule&&(n=arguments[arguments.length-1],r--);var i=null;r>=2&&(i=arguments[1]);var s=Number.POSITIVE_INFINITY;return r>=3&&(s=arguments[2]),function(e){return e.lift(new M(t,i,s,n))}}(this.windowSize,this.windowInterval),B(t=>{const e=[];return t.forEach(t=>{t.data.pointables.forEach(t=>{t.type===this.leapPointableIdentifier&&e.push(t)})}),e}),B(t=>{const e=t.map(t=>t.tipPosition[0]);if(Math.max(...e)-Math.min(...e)<this.detectionThreshhold)return;const r=Z(e),n=tt(r),i=r.slice(0,n),s=r.slice(n);return i.length>10&&s.length>10&&Math.abs(i.length-s.length)<this.symmetryTolerance?{actionName:"ONE_SHOT",metrics:{cheatFactor:0,quality:0}}:void 0}),R(t=>void 0!==t),K(this.throttleTimeDuration)).subscribe(t)}}},rt=(t,e)=>{e.pipeline.classifySubscription&&e.pipeline.classifySubscription.unsubscribe(),e.pipeline.classifyOutputSubscription&&e.pipeline.classifyOutputSubscription.unsubscribe(),void 0!==t&&(e.pipeline.classifySubject=(new P).pipe(e=>e.lift((t=>new et[t.identifier](...t.args))(t))),e.pipeline.classifySubscription=e.pipeline.preprocessSubject.subscribe(e.pipeline.classifySubject),e.pipeline.classifyOutputSubscription=e.pipeline.classifySubject.subscribe(t=>{e.postMessage({payload:t,type:"OnClassificationReceived"})}),e.currentClassifierConfig=t,console.debug("New Classifier",t))};const nt={"DropNFrames-Preprocessor-v0.01":class{constructor(t){this.dropEvery=t}call(t,e){return e.pipe(R((t,e)=>e%this.dropEvery==0)).subscribe(t)}},"DestroyUselessFrames-V0.1":class{constructor(){}call(t,e){return e.pipe(R(t=>t.data.hands.length>0)).subscribe(t)}},"FPSThrottler-v0.01":class{constructor(t){this.targetFPS=t}call(t,e){return e.pipe(K(1e3/this.targetFPS)).subscribe(t)}}},it=(t,e)=>{e.pipeline.preprocessSubscription&&e.pipeline.preprocessSubscription.unsubscribe(),e.pipeline.deviceFrameSubscription&&e.pipeline.deviceFrameSubscription.unsubscribe(),e.pipeline.preprocessSubject=(new P).pipe(...t.map(t=>e=>e.lift((t=>new nt[t.identifier](...t.args))(t)))),e.pipeline.preprocessSubscription=e.pipeline.preprocessSubject.subscribe(e.pipeline.outputSubject),e.pipeline.deviceFrameSubscription=e.pipeline.deviceFrameSubject.subscribe(e.pipeline.preprocessSubject),rt(e.currentClassifierConfig,e)},st=t=>{ot({connectedToNativeDeviceDriver:!1,deviceHardwareConnected:void 0,nativeDeviceDriverOnline:!1},t),t.deviceStreamingIntervalId&&self.clearInterval(t.deviceStreamingIntervalId)},ot=(t,e)=>{e.connectionState=Object.assign({},e.connectionState,t),e.postMessage({payload:e.connectionState,type:"OnConnectionStateChanged"})},ct=(t,e)=>{const r=new WebSocket(`ws://${e.configuration.host}:${e.configuration.port}/v7.json`);r.onerror=(()=>{st(e),setTimeout(ct.bind(self,t,e),t)}),r.onclose=st.bind(self,e),r.onopen=(()=>{e.deviceStreamingIntervalId=self.setInterval(()=>{Date.now()-e.lastFrameTime>1e3?ot({deviceHardwareConnected:!1},e):ot({deviceHardwareConnected:!0},e)},1e3),ot({connectedToNativeDeviceDriver:!0,nativeDeviceDriverOnline:!0},e)}),r.onmessage=(t=>{((t,e,r)=>{const n=JSON.parse(t);if(n.hasOwnProperty("serviceVersion"))[{enableGestures:void 0!==r.configuration.enableGestures&&r.configuration.enableGestures},{background:void 0!==r.configuration.background&&r.configuration.background},{optimizeHMD:void 0!==r.configuration.optimizeHMD&&r.configuration.optimizeHMD},{focused:void 0===r.configuration.focused||r.configuration.focused}].forEach(t=>{e.send(JSON.stringify(t))});else if(n.hasOwnProperty("event"));else{const t=n;r.lastFrameTime=Date.now(),r.pipeline.deviceFrameSubject&&r.pipeline.deviceFrameSubject.next({data:t})}})(t.data,r,e)})};var ut;const at=(t=>(t.pipeline={classifySubject:new P,deviceFrameSubject:new P,outputSubject:new P,preprocessSubject:new P},t.lastFrameTime=0,t.connectionState=A,t))(self);at.onmessage=(t=>{const e=t.data;switch(e.cmd){case"EstablishConnection":return(t=>{(t=t).pipeline.deviceFrameSubscription=t.pipeline.deviceFrameSubject.subscribe(t.pipeline.preprocessSubject),t.pipeline.preprocessSubscription=t.pipeline.preprocessSubject.subscribe(t.pipeline.outputSubject),t.pipeline.outputSubject.subscribe(e=>{t.postMessage({payload:e,type:"OnFinalizedFrameReceived"})}),void 0!==t.configuration?(console.log("Establishing Connection to native device driver"),ct(1e3,t)):console.warn("Can't establish Connection. Worker Thread has no Configuration.")})(at);case"UpdateConfiguration":return ht(e.payload,at);case"UpdatePreProcess":return it(e.payload,at);case"UpdateClassifier":return rt(e.payload,at);case"Digest":return lt(e.payload,at)}});const lt=(t,e)=>{e.pipeline.deviceFrameSubject.next(t)},ht=(t,e)=>{e.configuration=t}}]);